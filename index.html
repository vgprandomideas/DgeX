<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DamageEx - Global Damaged Goods Platform</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
        }

        /* Login Screen */
        .login-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        .login-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 24px;
            padding: 50px;
            box-shadow: 0 30px 60px rgba(0, 0, 0, 0.15);
            width: 100%;
            max-width: 520px;
            text-align: center;
        }

        .logo {
            font-size: 3rem;
            font-weight: 800;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
        }

        .tagline {
            color: #666;
            font-size: 1.1rem;
            margin-bottom: 40px;
        }

        .user-type-selector {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 30px;
        }

        .user-type-btn {
            padding: 20px;
            border: 2px solid #e1e5e9;
            border-radius: 16px;
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .user-type-btn:hover {
            border-color: #667eea;
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.1);
        }

        .user-type-btn.active {
            border-color: #667eea;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .user-type-icon {
            font-size: 2rem;
            margin-bottom: 8px;
        }

        .user-type-title {
            font-weight: 600;
            font-size: 1rem;
            margin-bottom: 5px;
        }

        .user-type-desc {
            font-size: 0.8rem;
            opacity: 0.7;
        }

        .login-form {
            display: none;
        }

        .login-form.active {
            display: block;
        }

        .form-group {
            margin-bottom: 20px;
            text-align: left;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
        }

        input, select {
            width: 100%;
            padding: 15px 20px;
            border: 2px solid #e1e5e9;
            border-radius: 12px;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        input:focus, select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .login-btn {
            width: 100%;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 18px;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 20px;
        }

        .login-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }

        /* Dashboard Layout */
        .dashboard {
            display: none;
        }

        .dashboard.active {
            display: block;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 25px 35px;
            margin-bottom: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .header-left h1 {
            font-size: 2rem;
            color: #333;
            margin-bottom: 5px;
        }

        .header-left p {
            color: #666;
            font-size: 1rem;
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .user-info {
            text-align: right;
        }

        .user-name {
            font-weight: 600;
            color: #333;
            margin-bottom: 3px;
        }

        .user-role {
            font-size: 0.9rem;
            color: #666;
        }

        .logout-btn {
            background: linear-gradient(135deg, #ff6b6b, #ee5a24);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .logout-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 15px rgba(255, 107, 107, 0.3);
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-bottom: 30px;
        }

        .stats-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            text-align: center;
            transition: transform 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .stats-card:hover {
            transform: translateY(-5px);
        }

        .stats-card.live {
            border: 2px solid #22c55e;
        }

        .stats-icon {
            font-size: 3rem;
            margin-bottom: 15px;
        }

        .stats-number {
            font-size: 2.5rem;
            font-weight: 800;
            color: #667eea;
            margin-bottom: 8px;
            transition: all 0.3s ease;
        }

        .stats-label {
            color: #666;
            font-weight: 600;
            text-transform: uppercase;
            font-size: 0.9rem;
            letter-spacing: 1px;
        }

        .live-indicator {
            position: absolute;
            top: 15px;
            right: 15px;
            width: 12px;
            height: 12px;
            background: #22c55e;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(34, 197, 94, 0); }
            100% { box-shadow: 0 0 0 0 rgba(34, 197, 94, 0); }
        }

        .quick-actions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .action-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            color: inherit;
            position: relative;
            border: 2px solid transparent;
        }

        .action-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
            border-color: #667eea;
        }

        .action-card.working {
            border-color: #22c55e;
            background: linear-gradient(135deg, #f0fdf4, #dcfce7);
        }

        .action-icon {
            font-size: 2.5rem;
            margin-bottom: 15px;
            color: #667eea;
        }

        .action-title {
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 8px;
            color: #333;
        }

        .action-desc {
            color: #666;
            line-height: 1.5;
        }

        .working-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #22c55e;
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 10px;
            font-weight: 600;
            text-transform: uppercase;
        }

        .recent-activity {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .activity-header {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 25px;
            color: #333;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .activity-item {
            display: flex;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid #f0f0f0;
            animation: slideIn 0.3s ease;
        }

        .activity-item:last-child {
            border-bottom: none;
        }

        .activity-item.new {
            background: rgba(34, 197, 94, 0.1);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 10px;
            border: none;
        }

        @keyframes slideIn {
            from { transform: translateX(-20px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        .activity-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            margin-right: 15px;
            font-size: 1.2rem;
        }

        .activity-content {
            flex: 1;
        }

        .activity-text {
            font-weight: 600;
            color: #333;
            margin-bottom: 3px;
        }

        .activity-time {
            font-size: 0.9rem;
            color: #666;
        }

        .notification-badge {
            background: linear-gradient(135deg, #ff6b6b, #ee5a24);
            color: white;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            font-weight: bold;
            position: relative;
            top: -5px;
            left: -5px;
        }

        .currency-selector {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-left: 20px;
        }

        .currency-btn {
            padding: 6px 12px;
            border: 2px solid #e1e5e9;
            border-radius: 15px;
            background: white;
            color: #666;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 12px;
        }

        .currency-btn.active {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border-color: #667eea;
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: white;
            border-radius: 12px;
            padding: 20px 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            border-left: 4px solid #22c55e;
            transform: translateX(400px);
            transition: transform 0.3s ease;
            z-index: 1000;
            max-width: 350px;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification-title {
            font-weight: 600;
            color: #333;
            margin-bottom: 8px;
        }

        .notification-text {
            font-size: 14px;
            color: #666;
            line-height: 1.4;
        }

        .module-iframe {
            width: 100%;
            height: 80vh;
            border: none;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            background: white;
            margin-top: 20px;
        }

        .performance-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .performance-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            border: 2px solid #e1e5e9;
            transition: all 0.3s ease;
        }

        .performance-card.excellent {
            border-color: #22c55e;
            background: linear-gradient(135deg, #f0fdf4, #dcfce7);
        }

        .performance-card.good {
            border-color: #3b82f6;
            background: linear-gradient(135deg, #eff6ff, #dbeafe);
        }

        .performance-card.warning {
            border-color: #f59e0b;
            background: linear-gradient(135deg, #fffbeb, #fef3c7);
        }

        .performance-number {
            font-size: 2rem;
            font-weight: bold;
            color: #333;
            margin-bottom: 8px;
        }

        .performance-label {
            font-size: 14px;
            color: #666;
            font-weight: 600;
        }

        @media (max-width: 768px) {
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
            
            .header {
                flex-direction: column;
                gap: 20px;
                text-align: center;
            }
            
            .login-card {
                padding: 30px;
                margin: 20px;
            }
            
            .user-type-selector {
                grid-template-columns: 1fr;
            }
            
            .quick-actions {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Login Screen -->
        <div class="login-container" id="loginContainer">
            <div class="login-card">
                <div class="logo">DamageEX</div>
                <div class="tagline">Global Damaged Goods Marketplace</div>
                
                <div class="user-type-selector">
                    <div class="user-type-btn" data-type="cha">
                        <div class="user-type-icon">üè¢</div>
                        <div class="user-type-title">CHA / Exporter</div>
                        <div class="user-type-desc">Report & List Damaged Goods</div>
                    </div>
                    <div class="user-type-btn" data-type="buyer">
                        <div class="user-type-icon">üõí</div>
                        <div class="user-type-title">Buyer</div>
                        <div class="user-type-desc">Bid & Purchase Items</div>
                    </div>
                    <div class="user-type-btn" data-type="thirdparty">
                        <div class="user-type-icon">ü§ù</div>
                        <div class="user-type-title">Third Party</div>
                        <div class="user-type-desc">On-Behalf Services</div>
                    </div>
                    <div class="user-type-btn" data-type="admin">
                        <div class="user-type-icon">‚öôÔ∏è</div>
                        <div class="user-type-title">Admin</div>
                        <div class="user-type-desc">Platform Management</div>
                    </div>
                </div>

                <!-- CHA Login Form -->
                <div class="login-form" id="chaForm">
                    <div class="form-group">
                        <label>CHA License Number</label>
                        <input type="text" id="chaLicense" placeholder="e.g., CHA/2024/MUM/001" required>
                    </div>
                    <div class="form-group">
                        <label>GST Number</label>
                        <input type="text" id="chaGST" placeholder="e.g., 27AAAAA0000A1Z5" required>
                    </div>
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" id="chaEmail" placeholder="your@email.com" required>
                    </div>
                    <div class="form-group">
                        <label>Mobile Number</label>
                        <input type="tel" id="chaMobile" placeholder="+91 9876543210" required>
                    </div>
                    <button class="login-btn" onclick="login('cha')">Login as CHA</button>
                </div>

                <!-- Buyer Login Form -->
                <div class="login-form" id="buyerForm">
                    <div class="form-group">
                        <label>PAN Number</label>
                        <input type="text" id="buyerPAN" placeholder="e.g., ABCDE1234F" required>
                    </div>
                    <div class="form-group">
                        <label>Aadhaar Number</label>
                        <input type="text" id="buyerAadhaar" placeholder="e.g., 1234 5678 9012" required>
                    </div>
                    <div class="form-group">
                        <label>Business Type</label>
                        <select id="buyerBusiness" required>
                            <option value="">Select Business Type</option>
                            <option value="individual">Individual</option>
                            <option value="proprietorship">Proprietorship</option>
                            <option value="partnership">Partnership</option>
                            <option value="pvt_ltd">Private Limited</option>
                            <option value="public_ltd">Public Limited</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" id="buyerEmail" placeholder="your@email.com" required>
                    </div>
                    <button class="login-btn" onclick="login('buyer')">Login as Buyer</button>
                </div>

                <!-- Third Party Login Form -->
                <div class="login-form" id="thirdpartyForm">
                    <div class="form-group">
                        <label>Company Registration</label>
                        <input type="text" id="thirdpartyReg" placeholder="e.g., U72900MH2020PTC123456" required>
                    </div>
                    <div class="form-group">
                        <label>Net Worth Certificate</label>
                        <input type="file" id="thirdpartyNetWorth" accept=".pdf" required>
                    </div>
                    <div class="form-group">
                        <label>Bank Guarantee Amount</label>
                        <input type="number" id="thirdpartyGuarantee" placeholder="e.g., 5000000" required>
                    </div>
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" id="thirdpartyEmail" placeholder="your@email.com" required>
                    </div>
                    <button class="login-btn" onclick="login('thirdparty')">Login as Third Party</button>
                </div>

                <!-- Admin Login Form -->
                <div class="login-form" id="adminForm">
                    <div class="form-group">
                        <label>Admin ID</label>
                        <input type="text" id="adminID" placeholder="Admin Username" required>
                    </div>
                    <div class="form-group">
                        <label>Password</label>
                        <input type="password" id="adminPassword" placeholder="Password" required>
                    </div>
                    <button class="login-btn" onclick="login('admin')">Login as Admin</button>
                </div>
            </div>
        </div>

        <!-- Dashboard -->
        <div class="dashboard" id="dashboard">
            <div class="header">
                <div class="header-left">
                    <h1 id="dashboardTitle">CHA Dashboard</h1>
                    <p id="dashboardSubtitle">Manage your damaged goods and auctions</p>
                </div>
                <div class="header-right">
                    <div class="user-info">
                        <div class="user-name" id="userName">John Doe</div>
                        <div class="user-role" id="userRole">Customs House Agent</div>
                    </div>
                    <div class="currency-selector">
                        <span style="font-weight: 600; color: #666; font-size: 12px;">Currency:</span>
                        <button class="currency-btn active" data-currency="INR">‚Çπ INR</button>
                        <button class="currency-btn" data-currency="USD">$ USD</button>
                        <button class="currency-btn" data-currency="EUR">‚Ç¨ EUR</button>
                    </div>
                    <button class="logout-btn" onclick="logout()">Logout</button>
                </div>
            </div>

            <div class="dashboard-grid">
                <div class="stats-card live">
                    <div class="live-indicator"></div>
                    <div class="stats-icon">üì¶</div>
                    <div class="stats-number" id="totalItems">142</div>
                    <div class="stats-label">Total Items</div>
                </div>
                <div class="stats-card live">
                    <div class="live-indicator"></div>
                    <div class="stats-icon">üè∫</div>
                    <div class="stats-number" id="activeAuctions">23</div>
                    <div class="stats-label">Active Auctions</div>
                </div>
                <div class="stats-card live">
                    <div class="live-indicator"></div>
                    <div class="stats-icon">üí∞</div>
                    <div class="stats-number" id="totalValue">‚Çπ45.2L</div>
                    <div class="stats-label">Total Value</div>
                </div>
                <div class="stats-card">
                    <div class="stats-icon">üöõ</div>
                    <div class="stats-number" id="shipmentsCount">18</div>
                    <div class="stats-label">Active Shipments</div>
                </div>
                <div class="stats-card live">
                    <div class="live-indicator"></div>
                    <div class="stats-icon">üí≥</div>
                    <div class="stats-number" id="scfActive">‚Çπ1.8L</div>
                    <div class="stats-label">Active SCF</div>
                </div>
                <div class="stats-card">
                    <div class="stats-icon">üë•</div>
                    <div class="stats-number" id="usersOnline">847</div>
                    <div class="stats-label">Users Online</div>
                </div>
            </div>

            <div class="performance-grid" id="performanceGrid">
                <div class="performance-card excellent">
                    <div class="performance-number">98.2%</div>
                    <div class="performance-label">System Uptime</div>
                </div>
                <div class="performance-card good">
                    <div class="performance-number">156ms</div>
                    <div class="performance-label">Avg Response Time</div>
                </div>
                <div class="performance-card excellent">
                    <div class="performance-number">94.7%</div>
                    <div class="performance-label">Success Rate</div>
                </div>
                <div class="performance-card warning">
                    <div class="performance-number">67%</div>
                    <div class="performance-label">Server Load</div>
                </div>
            </div>

            <div class="quick-actions" id="quickActions">
                <!-- Actions will be populated based on user type -->
            </div>

            <div class="recent-activity">
                <div class="activity-header">
                    Recent Activity
                    <div style="display: flex; align-items: center; gap: 8px; color: #22c55e; font-size: 14px;">
                        <div style="width: 8px; height: 8px; background: #22c55e; border-radius: 50%; animation: pulse 2s infinite;"></div>
                        <span>LIVE</span>
                    </div>
                </div>
                <div id="activityList">
                    <!-- Activity items will be populated -->
                </div>
            </div>
        </div>
    </div>

    <div class="notification" id="notification">
        <div class="notification-title" id="notificationTitle">Success</div>
        <div class="notification-text" id="notificationText">Action completed successfully!</div>
    </div>

    <script>
        // Currency rates
        const currencies = {
            'INR': { symbol: '‚Çπ', rate: 1, name: 'Indian Rupee' },
            'USD': { symbol: '$', rate: 0.012, name: 'US Dollar' },
            'EUR': { symbol: '‚Ç¨', rate: 0.011, name: 'Euro' }
        };

        let currentCurrency = 'INR';

        class DamageExPlatform {
            constructor() {
                this.currentUser = null;
                this.userType = null;
                this.dashboardInterval = null;
                this.activityInterval = null;
                this.init();
            }

            init() {
                this.bindEvents();
                this.checkSavedLogin();
            }

            bindEvents() {
                // User type selection
                document.querySelectorAll('.user-type-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        this.selectUserType(e.currentTarget.dataset.type);
                    });
                });

                // Currency selector
                document.querySelectorAll('.currency-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        document.querySelectorAll('.currency-btn').forEach(b => b.classList.remove('active'));
                        e.target.classList.add('active');
                        currentCurrency = e.target.dataset.currency;
                        this.updateCurrencyDisplay();
                        this.showNotification('Currency Changed', `Switched to ${currencies[currentCurrency].name}`);
                    });
                });
            }

            selectUserType(type) {
                // Update button states
                document.querySelectorAll('.user-type-btn').forEach(btn => {
                    btn.classList.remove('active');
                });
                document.querySelector(`[data-type="${type}"]`).classList.add('active');

                // Show appropriate form
                document.querySelectorAll('.login-form').forEach(form => {
                    form.classList.remove('active');
                });
                document.getElementById(`${type}Form`).classList.add('active');
            }

            login(userType) {
                // Validate form
                if (!this.validateForm(userType)) {
                    return;
                }

                this.userType = userType;
                this.currentUser = this.generateUserData(userType);
                
                // Simulate login process
                this.showNotification('Logging In...', 'Authenticating your credentials...');
                
                setTimeout(() => {
                    // Hide login, show dashboard
                    document.getElementById('loginContainer').style.display = 'none';
                    document.getElementById('dashboard').classList.add('active');
                    
                    this.updateDashboard();
                    this.saveLogin();
                    this.startLiveUpdates();
                    this.showNotification('Login Successful!', `Welcome to DamageEx ${this.currentUser.name}`);
                }, 2000);
            }

            validateForm(userType) {
                const requiredFields = {
                    cha: ['chaLicense', 'chaGST', 'chaEmail', 'chaMobile'],
                    buyer: ['buyerPAN', 'buyerAadhaar', 'buyerBusiness', 'buyerEmail'],
                    thirdparty: ['thirdpartyReg', 'thirdpartyNetWorth', 'thirdpartyGuarantee', 'thirdpartyEmail'],
                    admin: ['adminID', 'adminPassword']
                };

                const fields = requiredFields[userType];
                for (let fieldId of fields) {
                    const field = document.getElementById(fieldId);
                    if (!field.value.trim()) {
                        this.showNotification('Validation Error', `Please fill in all required fields`, true);
                        field.focus();
                        return false;
                    }
                }

                // Special validations
                if (userType === 'cha') {
                    const license = document.getElementById('chaLicense').value;
                    if (!license.includes('CHA/')) {
                        this.showNotification('Invalid License', 'CHA License format is incorrect', true);
                        return false;
                    }
                }

                if (userType === 'admin') {
                    const password = document.getElementById('adminPassword').value;
                    if (password.length < 6) {
                        this.showNotification('Weak Password', 'Password must be at least 6 characters', true);
                        return false;
                    }
                }

                return true;
            }

            generateUserData(userType) {
                const userData = {
                    cha: {
                        name: "Mumbai Customs Services Pvt Ltd",
                        role: "Customs House Agent",
                        title: "CHA Dashboard",
                        subtitle: "Manage damaged goods reports and auctions",
                        stats: { items: 142, auctions: 23, value: 4520000, shipments: 18, scf: 180000, users: 847 }
                    },
                    buyer: {
                        name: "Rajesh Trading Company",
                        role: "Verified Buyer",
                        title: "Buyer Dashboard", 
                        subtitle: "Browse auctions and manage your purchases",
                        stats: { items: 89, auctions: 12, value: 2850000, shipments: 8, scf: 120000, users: 847 }
                    },
                    thirdparty: {
                        name: "Global Liquidation Partners",
                        role: "Third Party Service Provider",
                        title: "Third Party Dashboard",
                        subtitle: "Manage on-behalf services and bulk acquisitions", 
                        stats: { items: 234, auctions: 45, value: 6780000, shipments: 32, scf: 450000, users: 847 }
                    },
                    admin: {
                        name: "Platform Administrator",
                        role: "System Admin",
                        title: "Admin Dashboard",
                        subtitle: "Platform oversight and management",
                        stats: { items: 1250, auctions: 187, value: 32570000, shipments: 156, scf: 2340000, users: 847 }
                    }
                };
                return userData[userType];
            }

            updateDashboard() {
                const user = this.currentUser;
                
                // Update header
                document.getElementById('dashboardTitle').textContent = user.title;
                document.getElementById('dashboardSubtitle').textContent = user.subtitle;
                document.getElementById('userName').textContent = user.name;
                document.getElementById('userRole').textContent = user.role;
                
                // Update stats
                this.updateStats();
                
                // Update quick actions
                this.updateQuickActions();
                
                // Update activity
                this.updateActivity();
            }

            updateStats() {
                const user = this.currentUser;
                const rate = currencies[currentCurrency].rate;
                const symbol = currencies[currentCurrency].symbol;
                
                document.getElementById('totalItems').textContent = user.stats.items;
                document.getElementById('activeAuctions').textContent = user.stats.auctions;
                document.getElementById('totalValue').textContent = this.formatCurrency(user.stats.value);
                document.getElementById('shipmentsCount').textContent = user.stats.shipments;
                document.getElementById('scfActive').textContent = this.formatCurrency(user.stats.scf);
                document.getElementById('usersOnline').textContent = user.stats.users;
            }

            formatCurrency(amount) {
                const rate = currencies[currentCurrency].rate;
                const symbol = currencies[currentCurrency].symbol;
                const convertedAmount = amount * rate;
                
                if (currentCurrency === 'INR') {
                    if (convertedAmount >= 10000000) {
                        return `${symbol}${(convertedAmount / 10000000).toFixed(1)}Cr`;
                    } else if (convertedAmount >= 100000) {
                        return `${symbol}${(convertedAmount / 100000).toFixed(1)}L`;
                    }
                    return `${symbol}${convertedAmount.toLocaleString()}`;
                } else {
                    return `${symbol}${Math.round(convertedAmount).toLocaleString()}`;
                }
            }

            updateCurrencyDisplay() {
                this.updateStats();
            }

            updateQuickActions() {
                const actions = this.getActionsForUserType(this.userType);
                const actionsHTML = actions.map(action => `
                    <div class="action-card ${action.working ? 'working' : ''}" onclick="navigateTo('${action.link}')">
                        ${action.working ? '<div class="working-badge">LIVE</div>' : ''}
                        <div class="action-icon">${action.icon}</div>
                        <div class="action-title">${action.title}</div>
                        <div class="action-desc">${action.desc}</div>
                    </div>
                `).join('');
                
                document.getElementById('quickActions').innerHTML = actionsHTML;
            }

            getActionsForUserType(userType) {
                const actionMap = {
                    cha: [
                        { icon: "üìù", title: "Report Damage", desc: "Submit new damaged goods report with AI-powered categorization", link: "damage-intake", working: false },
                        { icon: "üè∫", title: "Live Auctions", desc: "Create and manage auctions with real-time bidding", link: "auctions", working: true },
                        { icon: "üè™", title: "Warehousing", desc: "Real-time storage cost calculator and booking system", link: "warehousing", working: true },
                        { icon: "üöõ", title: "Logistics", desc: "Complete transport management with live GPS tracking", link: "logistics", working: true },
                        { icon: "üí≥", title: "SCF Portal", desc: "Supply Chain Finance application and management", link: "scf", working: true },
                        { icon: "üìä", title: "Analytics", desc: "Advanced reporting and business intelligence", link: "analytics", working: false }
                    ],
                    buyer: [
                        { icon: "üîç", title: "Browse Auctions", desc: "Find and bid on damaged goods with real-time updates", link: "auctions", working: true },
                        { icon: "üí≥", title: "Apply for SCF", desc: "Get instant financing for your purchases", link: "scf", working: true },
                        { icon: "üìà", title: "My Bids", desc: "Track your bidding activity and won auctions", link: "my-bids", working: false },
                        { icon: "üöõ", title: "Track Shipments", desc: "Real-time GPS tracking of your purchases", link: "logistics", working: true },
                        { icon: "üè™", title: "Storage Options", desc: "Find and book temporary storage solutions", link: "warehousing", working: true },
                        { icon: "üíº", title: "Portfolio", desc: "Manage your acquired inventory and investments", link: "portfolio", working: false }
                    ],
                    thirdparty: [
                        { icon: "‚ö°", title: "Quick Purchase", desc: "Buy items at fixed prices with guaranteed deals", link: "quick-buy", working: false },
                        { icon: "üì¶", title: "Bulk Operations", desc: "Manage large lot acquisitions and bulk deals", link: "bulk-ops", working: false },
                        { icon: "üè∫", title: "Live Auctions", desc: "Participate in auctions with advanced bidding tools", link: "auctions", working: true },
                        { icon: "üöõ", title: "Logistics Hub", desc: "Complete supply chain management solution", link: "logistics", working: true },
                        { icon: "üí∞", title: "Price Setting", desc: "Set guaranteed pricing for quick liquidation", link: "pricing", working: false },
                        { icon: "üìã", title: "Portfolio", desc: "Comprehensive inventory and performance tracking", link: "portfolio", working: false }
                    ],
                    admin: [
                        { icon: "üë•", title: "User Management", desc: "Manage platform users, roles, and permissions", link: "users", working: false },
                        { icon: "üè∫", title: "Auction Oversight", desc: "Monitor and manage all platform auctions", link: "auctions", working: true },
                        { icon: "üìä", title: "System Analytics", desc: "Comprehensive platform performance insights", link: "analytics", working: false },
                        { icon: "üöõ", title: "Logistics Control", desc: "Fleet management and logistics oversight", link: "logistics", working: true },
                        { icon: "üí≥", title: "Financial Management", desc: "SCF oversight and financial operations", link: "scf", working: true },
                        { icon: "‚öôÔ∏è", title: "Platform Settings", desc: "System configuration and global settings", link: "settings", working: false }
                    ]
                };
                return actionMap[userType] || [];
            }

            updateActivity() {
                const activities = this.getActivityForUserType(this.userType);
                const activityHTML = activities.map(activity => `
                    <div class="activity-item ${activity.isNew ? 'new' : ''}">
                        <div class="activity-icon">${activity.icon}</div>
                        <div class="activity-content">
                            <div class="activity-text">${activity.text}</div>
                            <div class="activity-time">${activity.time}</div>
                        </div>
                        ${activity.badge ? `<div class="notification-badge">${activity.badge}</div>` : ''}
                    </div>
                `).join('');
                
                document.getElementById('activityList').innerHTML = activityHTML;
            }

            getActivityForUserType(userType) {
                const activityMap = {
                    cha: [
                        { icon: "üìù", text: "New damage report submitted for Container TGHU1234567", time: "2 hours ago", isNew: false },
                        { icon: "üè∫", text: "Auction DGX-2024-001 received 15 new bids", time: "4 hours ago", badge: "15" },
                        { icon: "‚úÖ", text: "Survey completed for Electronics lot - Grade B classification", time: "1 day ago" },
                        { icon: "üí∞", text: "Payment received for Auction DGX-2024-002 - ‚Çπ8.5L", time: "2 days ago" },
                        { icon: "üöõ", text: "Shipment MSCU9876543 delivered to Chennai warehouse", time: "3 days ago" }
                    ],
                    buyer: [
                        { icon: "üèÜ", text: "You won auction DGX-2024-003 for ‚Çπ2.3L", time: "1 hour ago", isNew: true },
                        { icon: "üí≥", text: "SCF loan approved for ‚Çπ1.5L at 14% APR", time: "3 hours ago" },
                        { icon: "üì¶", text: "New electronics auction available - 150 units", time: "5 hours ago", badge: "New" },
                        { icon: "üöõ", text: "Logistics arranged for pickup from Mumbai Port", time: "1 day ago" },
                        { icon: "üí∞", text: "Refund processed for cancelled bid - ‚Çπ45,000", time: "2 days ago" }
                    ],
                    thirdparty: [
                        { icon: "‚ö°", text: "Quick purchased 5 lots for ‚Çπ12.5L", time: "30 mins ago", isNew: true },
                        { icon: "üì¶", text: "Bulk acquisition completed - 50 items from 3 auctions", time: "2 hours ago" },
                        { icon: "üí∞", text: "Set guaranteed pricing for textile lots - 15% markup", time: "4 hours ago" },
                        { icon: "üìã", text: "Portfolio value increased to ‚Çπ67.8L (+8.2%)", time: "1 day ago" },
                        { icon: "üöõ", text: "Coordinated logistics for 12 simultaneous pickups", time: "2 days ago" }
                    ],
                    admin: [
                        { icon: "üë•", text: "25 new users registered today across all categories", time: "1 hour ago", badge: "25" },
                        { icon: "üè∫", text: "187 active auctions with total value ‚Çπ32.5Cr", time: "2 hours ago" },
                        { icon: "‚ö†Ô∏è", text: "Payment dispute resolved - automated refund issued", time: "3 hours ago" },
                        { icon: "üìä", text: "Monthly performance report generated", time: "1 day ago" },
                        { icon: "üîß", text: "System maintenance completed - 99.9% uptime maintained", time: "2 days ago" }
                    ]
                };
                return activityMap[userType] || [];
            }

            startLiveUpdates() {
                // Update dashboard stats every 5 seconds
                this.dashboardInterval = setInterval(() => {
                    this.updateLiveStats();
                }, 5000);

                // Add new activity every 15 seconds
                this.activityInterval = setInterval(() => {
                    this.addLiveActivity();
                }, 15000);
            }

            updateLiveStats() {
                const user = this.currentUser;
                
                // Simulate small changes in stats
                const variations = {
                    items: Math.floor(Math.random() * 5) - 2, // ¬±2
                    auctions: Math.floor(Math.random() * 3) - 1, // ¬±1
                    value: Math.floor(Math.random() * 100000) - 50000, // ¬±50K
                    shipments: Math.floor(Math.random() * 3) - 1, // ¬±1
                    scf: Math.floor(Math.random() * 50000) - 25000, // ¬±25K
                    users: Math.floor(Math.random() * 20) - 10 // ¬±10
                };

                Object.keys(variations).forEach(key => {
                    user.stats[key] = Math.max(0, user.stats[key] + variations[key]);
                });

                this.updateStats();

                // Animate updated numbers
                document.querySelectorAll('.stats-number').forEach(el => {
                    el.style.color = '#22c55e';
                    el.style.transform = 'scale(1.05)';
                    setTimeout(() => {
                        el.style.color = '#667eea';
                        el.style.transform = 'scale(1)';
                    }, 1000);
                });
            }

            addLiveActivity() {
                const activities = [
                    { icon: "üöõ", text: "New shipment dispatched from Chennai Port", time: "Just now" },
                    { icon: "üè∫", text: "Auction DGX-2024-008 started with 25 items", time: "Just now" },
                    { icon: "üí≥", text: "SCF application approved in under 2 minutes", time: "Just now" },
                    { icon: "üì¶", text: "Container GESU5554444 inspection completed", time: "Just now" },
                    { icon: "üí∞", text: "Payment processed for winning bid ‚Çπ4.2L", time: "Just now" }
                ];

                const randomActivity = activities[Math.floor(Math.random() * activities.length)];
                randomActivity.isNew = true;

                const activityList = document.getElementById('activityList');
                const newActivityHTML = `
                    <div class="activity-item new">
                        <div class="activity-icon">${randomActivity.icon}</div>
                        <div class="activity-content">
                            <div class="activity-text">${randomActivity.text}</div>
                            <div class="activity-time">${randomActivity.time}</div>
                        </div>
                    </div>
                `;

                activityList.insertAdjacentHTML('afterbegin', newActivityHTML);

                // Remove old activities (keep only 8)
                if (activityList.children.length > 8) {
                    activityList.removeChild(activityList.lastChild);
                }

                // Remove 'new' class after 5 seconds
                setTimeout(() => {
                    const newItem = activityList.firstElementChild;
                    if (newItem) {
                        newItem.classList.remove('new');
                    }
                }, 5000);
            }

            saveLogin() {
                sessionStorage.setItem('damageex_user', JSON.stringify({
                    userType: this.userType,
                    userData: this.currentUser
                }));
            }

            checkSavedLogin() {
                const saved = sessionStorage.getItem('damageex_user');
                if (saved) {
                    const { userType, userData } = JSON.parse(saved);
                    this.userType = userType;
                    this.currentUser = userData;
                    document.getElementById('loginContainer').style.display = 'none';
                    document.getElementById('dashboard').classList.add('active');
                    this.updateDashboard();
                    this.startLiveUpdates();
                }
            }

            logout() {
                // Clear intervals
                if (this.dashboardInterval) clearInterval(this.dashboardInterval);
                if (this.activityInterval) clearInterval(this.activityInterval);

                sessionStorage.removeItem('damageex_user');
                this.currentUser = null;
                this.userType = null;
                document.getElementById('loginContainer').style.display = 'flex';
                document.getElementById('dashboard').classList.remove('active');
                
                // Reset forms
                document.querySelectorAll('.user-type-btn').forEach(btn => {
                    btn.classList.remove('active');
                });
                document.querySelectorAll('.login-form').forEach(form => {
                    form.classList.remove('active');
                    form.querySelectorAll('input, select').forEach(input => {
                        input.value = '';
                    });
                });

                this.showNotification('Logged Out', 'You have been successfully logged out');
            }

            showNotification(title, text, isError = false) {
                const notification = document.getElementById('notification');
                const titleEl = document.getElementById('notificationTitle');
                const textEl = document.getElementById('notificationText');
                
                titleEl.textContent = title;
                textEl.textContent = text;
                
                if (isError) {
                    notification.style.borderLeftColor = '#ef4444';
                } else {
                    notification.style.borderLeftColor = '#22c55e';
                }
                
                notification.classList.add('show');
                
                setTimeout(() => {
                    notification.classList.remove('show');
                }, 4000);
            }
        }

        // Global functions
        function login(userType) {
            window.damageEx.login(userType);
        }

        function logout() {
            window.damageEx.logout();
        }

        function navigateTo(section) {
            // Working modules
            const workingModules = {
                'auctions': 'Opens the live auction platform with real-time bidding',
                'warehousing': 'Opens the warehousing calculator with live pricing',
                'logistics': 'Opens the complete logistics management system',
                'scf': 'Opens the SCF portal for loan applications'
            };

            if (workingModules[section]) {
                const confirmOpen = confirm(`üöÄ Open ${section.toUpperCase()} Module?\n\n${workingModules[section]}\n\nThis will open the fully functional demo in a new window.`);
                
                if (confirmOpen) {
                    // In a real implementation, these would open the actual modules
                    window.damageEx.showNotification(
                        `${section.toUpperCase()} Module`, 
                        `Opening ${section} module... This would launch the fully functional ${section} system.`
                    );
                    
                    // Simulate module opening
                    setTimeout(() => {
                        window.damageEx.showNotification(
                            'Module Ready', 
                            `${section.toUpperCase()} module loaded successfully with all live features active.`
                        );
                    }, 2000);
                }
            } else {
                // Modules in development
                window.damageEx.showNotification(
                    'Module In Development', 
                    `The ${section.replace('-', ' ')} module is currently under development. It will be available in the next release.`
                );
            }
        }

        // Initialize the platform
        window.damageEx = new DamageExPlatform();

        // Welcome message
        setTimeout(() => {
            window.damageEx.showNotification(
                'üéâ Welcome to DamageEx!', 
                'Complete platform with live auctions, warehousing, logistics, and SCF modules ready for demo.'
            );
        }, 1000);
    </script>
</body>
</html>