<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DamageEx - Logistics Management</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1800px;
            margin: 0 auto;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 25px 35px;
            margin-bottom: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .header-left h1 {
            font-size: 2rem;
            color: #333;
            margin-bottom: 5px;
        }

        .header-left p {
            color: #666;
        }

        .header-controls {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .currency-selector {
            padding: 12px 15px;
            border: 2px solid #e1e5e9;
            border-radius: 12px;
            font-size: 16px;
            background: white;
            cursor: pointer;
            font-weight: 600;
            color: #667eea;
        }

        .nav-btn {
            padding: 12px 24px;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
        }

        .nav-btn.primary {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .nav-btn.secondary {
            background: rgba(255, 255, 255, 0.8);
            color: #333;
            border: 2px solid #e1e5e9;
        }

        .nav-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.2);
        }

        .dashboard-overview {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }

        .overview-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.08);
            transition: transform 0.3s ease;
        }

        .overview-card:hover {
            transform: translateY(-3px);
        }

        .overview-icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .overview-number {
            font-size: 2rem;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 5px;
        }

        .overview-label {
            color: #666;
            font-size: 0.9rem;
            font-weight: 600;
        }

        .main-content {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 30px;
        }

        .logistics-panel {
            display: flex;
            flex-direction: column;
            gap: 25px;
        }

        .card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .section-title {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 25px;
            color: #333;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .shipment-filters {
            display: flex;
            gap: 15px;
            margin-bottom: 25px;
            align-items: center;
        }

        .filter-select {
            padding: 10px 15px;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            font-size: 14px;
        }

        .search-input {
            padding: 10px 15px;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            width: 200px;
            font-size: 14px;
        }

        .shipments-grid {
            display: flex;
            flex-direction: column;
            gap: 15px;
            max-height: 600px;
            overflow-y: auto;
        }

        .shipment-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            border-left: 5px solid #667eea;
            transition: all 0.3s ease;
        }

        .shipment-card:hover {
            transform: translateX(5px);
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.1);
        }

        .shipment-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .shipment-id {
            font-weight: bold;
            color: #667eea;
            font-size: 1.1rem;
        }

        .shipment-status {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
        }

        .status-pickup-scheduled {
            background: #fef3c7;
            color: #92400e;
        }

        .status-in-transit {
            background: #dbeafe;
            color: #1e40af;
        }

        .status-out-for-delivery {
            background: #fde68a;
            color: #d97706;
        }

        .status-delivered {
            background: #d1fae5;
            color: #065f46;
        }

        .status-delayed {
            background: #fed7d7;
            color: #c53030;
        }

        .shipment-route {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            gap: 15px;
            align-items: center;
            margin-bottom: 15px;
        }

        .route-point {
            text-align: center;
            padding: 10px;
            background: #f8fafc;
            border-radius: 10px;
        }

        .route-point.origin {
            background: linear-gradient(135deg, #f0f9ff, #e0f2fe);
            border: 2px solid #0891b2;
        }

        .route-point.destination {
            background: linear-gradient(135deg, #f0fdf4, #dcfce7);
            border: 2px solid #22c55e;
        }

        .route-arrow {
            font-size: 1.5rem;
            color: #667eea;
        }

        .location-name {
            font-weight: 600;
            color: #333;
            margin-bottom: 3px;
        }

        .location-time {
            font-size: 0.8rem;
            color: #666;
        }

        .shipment-details {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin-bottom: 15px;
        }

        .detail-item {
            text-align: center;
        }

        .detail-value {
            font-weight: 600;
            color: #333;
            margin-bottom: 3px;
        }

        .detail-label {
            font-size: 0.8rem;
            color: #666;
            text-transform: uppercase;
            font-weight: 600;
        }

        .progress-timeline {
            background: #f8fafc;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
        }

        .timeline-item {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
            position: relative;
        }

        .timeline-item:last-child {
            margin-bottom: 0;
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            left: 12px;
            top: 25px;
            width: 2px;
            height: 20px;
            background: #e1e5e9;
        }

        .timeline-item:last-child::before {
            display: none;
        }

        .timeline-dot {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            margin-right: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            z-index: 1;
        }

        .timeline-dot.completed {
            background: #22c55e;
            color: white;
        }

        .timeline-dot.current {
            background: #667eea;
            color: white;
        }

        .timeline-dot.pending {
            background: #e1e5e9;
            color: #666;
        }

        .timeline-content {
            flex: 1;
        }

        .timeline-title {
            font-weight: 600;
            color: #333;
            margin-bottom: 2px;
        }

        .timeline-time {
            font-size: 0.8rem;
            color: #666;
        }

        .shipment-actions {
            display: flex;
            gap: 10px;
        }

        .action-btn {
            flex: 1;
            padding: 10px 15px;
            border: none;
            border-radius: 8px;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .action-btn.primary {
            background: #667eea;
            color: white;
        }

        .action-btn.success {
            background: #22c55e;
            color: white;
        }

        .action-btn.secondary {
            background: #f8fafc;
            color: #333;
            border: 1px solid #e1e5e9;
        }

        .action-btn:hover {
            transform: translateY(-1px);
        }

        .sidebar {
            display: flex;
            flex-direction: column;
            gap: 25px;
        }

        .sidebar-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .sidebar-title {
            font-size: 1.3rem;
            font-weight: 700;
            color: #333;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .partner-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .partner-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 15px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        .partner-info {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .partner-logo {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        .partner-details h4 {
            font-weight: 600;
            color: #333;
            margin-bottom: 2px;
        }

        .partner-details p {
            font-size: 0.8rem;
            color: #666;
        }

        .partner-status {
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.7rem;
            font-weight: 600;
            text-transform: uppercase;
        }

        .partner-status.active {
            background: #d1fae5;
            color: #065f46;
        }

        .partner-status.busy {
            background: #fef3c7;
            color: #92400e;
        }

        .warehouse-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
        }

        .warehouse-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }

        .warehouse-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .warehouse-name {
            font-weight: bold;
            color: #333;
        }

        .capacity-indicator {
            font-size: 0.8rem;
            color: #666;
        }

        .capacity-bar {
            background: #f1f5f9;
            border-radius: 10px;
            height: 8px;
            margin: 10px 0;
            overflow: hidden;
        }

        .capacity-fill {
            height: 100%;
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 10px;
            transition: width 0.3s ease;
        }

        .warehouse-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-top: 10px;
        }

        .warehouse-stat {
            text-align: center;
            padding: 8px;
            background: #f8fafc;
            border-radius: 6px;
        }

        .stat-number {
            font-weight: bold;
            color: #667eea;
            margin-bottom: 2px;
        }

        .stat-label {
            font-size: 0.7rem;
            color: #666;
            text-transform: uppercase;
        }

        .alerts-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .alert-item {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            padding: 15px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        .alert-icon {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
            color: white;
        }

        .alert-icon.warning {
            background: #f59e0b;
        }

        .alert-icon.error {
            background: #ef4444;
        }

        .alert-icon.info {
            background: #3b82f6;
        }

        .alert-content {
            flex: 1;
        }

        .alert-title {
            font-weight: 600;
            color: #333;
            margin-bottom: 3px;
        }

        .alert-description {
            font-size: 0.8rem;
            color: #666;
            line-height: 1.4;
        }

        .alert-time {
            font-size: 0.7rem;
            color: #999;
            margin-top: 5px;
        }

        @media (max-width: 1024px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .dashboard-overview {
                grid-template-columns: repeat(3, 1fr);
            }
            
            .sidebar {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
                gap: 20px;
            }
        }

        @media (max-width: 768px) {
            .dashboard-overview {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .shipment-route {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .route-arrow {
                transform: rotate(90deg);
            }
            
            .shipment-details {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="header-left">
                <h1>🚛 Logistics Management</h1>
                <p>Track shipments, manage warehouses, and coordinate deliveries</p>
            </div>
            <div class="header-controls">
                <select class="currency-selector" id="currencySelector">
                    <option value="USD">🇺🇸 USD</option>
                    <option value="INR" selected>🇮🇳 INR</option>
                    <option value="EUR">🇪🇺 EUR</option>
                    <option value="GBP">🇬🇧 GBP</option>
                    <option value="AED">🇦🇪 AED</option>
                    <option value="SGD">🇸🇬 SGD</option>
                    <option value="CNY">🇨🇳 CNY</option>
                    <option value="JPY">🇯🇵 JPY</option>
                </select>
                <a href="#" class="nav-btn secondary" onclick="goBack()">← Dashboard</a>
                <a href="#" class="nav-btn primary" onclick="schedulePickup()">+ Schedule Pickup</a>
            </div>
        </div>

        <div class="dashboard-overview">
            <div class="overview-card">
                <div class="overview-icon">📦</div>
                <div class="overview-number" id="activeShipments">47</div>
                <div class="overview-label">Active Shipments</div>
            </div>
            <div class="overview-card">
                <div class="overview-icon">🚛</div>
                <div class="overview-number" id="inTransit">23</div>
                <div class="overview-label">In Transit</div>
            </div>
            <div class="overview-card">
                <div class="overview-icon">📍</div>
                <div class="overview-number" id="outForDelivery">8</div>
                <div class="overview-label">Out for Delivery</div>
            </div>
            <div class="overview-card">
                <div class="overview-icon">✅</div>
                <div class="overview-number" id="delivered">156</div>
                <div class="overview-label">Delivered Today</div>
            </div>
            <div class="overview-card">
                <div class="overview-icon">⚠️</div>
                <div class="overview-number" id="delayed">3</div>
                <div class="overview-label">Delayed</div>
            </div>
        </div>

        <div class="main-content">
            <div class="logistics-panel">
                <div class="card">
                    <div class="section-title">
                        <span>📦</span> Active Shipments
                    </div>
                    
                    <div class="shipment-filters">
                        <select class="filter-select" id="statusFilter">
                            <option value="">All Status</option>
                            <option value="pickup-scheduled">Pickup Scheduled</option>
                            <option value="in-transit">In Transit</option>
                            <option value="out-for-delivery">Out for Delivery</option>
                            <option value="delivered">Delivered</option>
                            <option value="delayed">Delayed</option>
                        </select>
                        <select class="filter-select" id="routeFilter">
                            <option value="">All Routes</option>
                            <option value="mumbai-delhi">Mumbai → Delhi</option>
                            <option value="chennai-bangalore">Chennai → Bangalore</option>
                            <option value="kolkata-mumbai">Kolkata → Mumbai</option>
                        </select>
                        <input type="text" class="search-input" placeholder="Search shipments..." id="searchInput">
                    </div>
                    
                    <div class="shipments-grid" id="shipmentsGrid">
                        <!-- Shipments will be populated here -->
                    </div>
                </div>
            </div>

            <div class="sidebar">
                <!-- Logistics Partners -->
                <div class="sidebar-card">
                    <div class="sidebar-title">
                        <span>🤝</span> Logistics Partners
                    </div>
                    
                    <div class="partner-list">
                        <div class="partner-item">
                            <div class="partner-info">
                                <div class="partner-logo">DHL</div>
                                <div class="partner-details">
                                    <h4>DHL Express</h4>
                                    <p>International shipping</p>
                                </div>
                            </div>
                            <div class="partner-status active">Active</div>
                        </div>
                        <div class="partner-item">
                            <div class="partner-info">
                                <div class="partner-logo">FE</div>
                                <div class="partner-details">
                                    <h4>FedEx</h4>
                                    <p>Express delivery</p>
                                </div>
                            </div>
                            <div class="partner-status active">Active</div>
                        </div>
                        <div class="partner-item">
                            <div class="partner-info">
                                <div class="partner-logo">DV</div>
                                <div class="partner-details">
                                    <h4>Delhivery</h4>
                                    <p>Last mile delivery</p>
                                </div>
                            </div>
                            <div class="partner-status busy">Busy</div>
                        </div>
                        <div class="partner-item">
                            <div class="partner-info">
                                <div class="partner-logo">PT</div>
                                <div class="partner-details">
                                    <h4>Porter</h4>
                                    <p>Local pickup</p>
                                </div>
                            </div>
                            <div class="partner-status active">Active</div>
                        </div>
                    </div>
                </div>

                <!-- Warehouse Status -->
                <div class="sidebar-card">
                    <div class="sidebar-title">
                        <span>🏪</span> Warehouse Status
                    </div>
                    
                    <div class="warehouse-grid">
                        <div class="warehouse-card">
                            <div class="warehouse-header">
                                <div class="warehouse-name">Mumbai Hub</div>
                                <div class="capacity-indicator">78% Full</div>
                            </div>
                            <div class="capacity-bar">
                                <div class="capacity-fill" style="width: 78%"></div>
                            </div>
                            <div class="warehouse-stats">
                                <div class="warehouse-stat">
                                    <div class="stat-number">245</div>
                                    <div class="stat-label">Items</div>
                                </div>
                                <div class="warehouse-stat">
                                    <div class="stat-number">18</div>
                                    <div class="stat-label">Pending</div>
                                </div>
                                <div class="warehouse-stat">
                                    <div class="stat-number">₹2.4L</div>
                                    <div class="stat-label">Value</div>
                                </div>
                            </div>
                        </div>
                        <div class="warehouse-card">
                            <div class="warehouse-header">
                                <div class="warehouse-name">Delhi ICD</div>
                                <div class="capacity-indicator">45% Full</div>
                            </div>
                            <div class="capacity-bar">
                                <div class="capacity-fill" style="width: 45%"></div>
                            </div>
                            <div class="warehouse-stats">
                                <div class="warehouse-stat">
                                    <div class="stat-number">156</div>
                                    <div class="stat-label">Items</div>
                                </div>
                                <div class="warehouse-stat">
                                    <div class="stat-number">8</div>
                                    <div class="stat-label">Pending</div>
                                </div>
                                <div class="warehouse-stat">
                                    <div class="stat-number">₹1.8L</div>
                                    <div class="stat-label">Value</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Alerts & Notifications -->
                <div class="sidebar-card">
                    <div class="sidebar-title">
                        <span>🚨</span> Alerts
                    </div>
                    
                    <div class="alerts-list">
                        <div class="alert-item">
                            <div class="alert-icon warning">⚠️</div>
                            <div class="alert-content">
                                <div class="alert-title">Weather Delay</div>
                                <div class="alert-description">Heavy rain affecting Mumbai-Pune route. 3 shipments delayed by 4-6 hours.</div>
                                <div class="alert-time">2 hours ago</div>
                            </div>
                        </div>
                        <div class="alert-item">
                            <div class="alert-icon error">❌</div>
                            <div class="alert-content">
                                <div class="alert-title">Delivery Failed</div>
                                <div class="alert-description">SHP-2024-156: Customer unavailable. Rescheduled for tomorrow.</div>
                                <div class="alert-time">4 hours ago</div>
                            </div>
                        </div>
                        <div class="alert-item">
                            <div class="alert-icon info">ℹ️</div>
                            <div class="alert-content">
                                <div class="alert-title">Capacity Alert</div>
                                <div class="alert-description">Mumbai Hub at 78% capacity. Consider alternate storage options.</div>
                                <div class="alert-time">6 hours ago</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        class LogisticsSystem {
            constructor() {
                this.currentCurrency = 'INR';
                this.exchangeRates = this.loadExchangeRates();
                this.shipments = this.loadShipments();
                this.init();
            }

            init() {
                this.bindEvents();
                this.renderShipments();
                this.startRealTimeUpdates();
            }

            bindEvents() {
                document.getElementById('currencySelector').addEventListener('change', (e) => {
                    this.changeCurrency(e.target.value);
                });
                
                document.getElementById('statusFilter').addEventListener('change', () => this.filterShipments());
                document.getElementById('routeFilter').addEventListener('change', () => this.filterShipments());
                document.getElementById('searchInput').addEventListener('input', () => this.filterShipments());
            }

            loadExchangeRates() {
                return {
                    USD: 1.0,
                    INR: 83.25,
                    EUR: 0.85,
                    GBP: 0.73,
                    AED: 3.67,
                    SGD: 1.35,
                    CNY: 7.15,
                    JPY: 150.0
                };
            }

            getCurrencySymbol(currency) {
                const symbols = {
                    USD: ',
                    INR: '₹',
                    EUR: '€',
                    GBP: '£',
                    AED: 'د.إ',
                    SGD: 'S,
                    CNY: '¥',
                    JPY: '¥'
                };
                return symbols[currency] || currency;
            }

            convertCurrency(amount, fromCurrency = 'USD', toCurrency = null) {
                if (!toCurrency) toCurrency = this.currentCurrency;
                if (fromCurrency === toCurrency) return amount;
                
                const usdAmount = amount / this.exchangeRates[fromCurrency];
                return Math.round(usdAmount * this.exchangeRates[toCurrency]);
            }

            formatCurrency(amount, currency = null) {
                if (!currency) currency = this.currentCurrency;
                const symbol = this.getCurrencySymbol(currency);
                const convertedAmount = this.convertCurrency(amount, 'USD', currency);
                
                if (currency === 'JPY') {
                    return `${symbol}${convertedAmount.toLocaleString()}`;
                } else if (currency === 'INR') {
                    return `${symbol}${convertedAmount.toLocaleString('en-IN')}`;
                } else {
                    return `${symbol}${convertedAmount.toLocaleString()}`;
                }
            }

            changeCurrency(newCurrency) {
                this.currentCurrency = newCurrency;
                this.renderShipments();
            }

            loadShipments() {
                return [
                    {
                        id: 'SHP-2024-001',
                        purchaseId: 'PUR-2024-015',
                        origin: 'Mumbai Port',
                        destination: 'Delhi ICD',
                        status: 'in-transit',
                        value: 25000, // USD base
                        weight: '2.5 tons',
                        distance: '1,400 km',
                        partner: 'DHL Express',
                        estimatedDelivery: new Date(Date.now() + 6 * 60 * 60 * 1000),
                        actualPickup: new Date(Date.now() - 12 * 60 * 60 * 1000),
                        currentLocation: 'Vadodara Hub',
                        progress: 65,
                        timeline: [
                            { status: 'Pickup Scheduled', time: '2024-08-01 09:00', completed: true },
                            { status: 'Picked Up', time: '2024-08-01 14:30', completed: true },
                            { status: 'In Transit', time: '2024-08-01 18:00', completed: true, current: true },
                            { status: 'Out for Delivery', time: '2024-08-02 08:00', completed: false },
                            { status: 'Delivered', time: '2024-08-02 12:00', completed: false }
                        ]
                    },
                    {
                        id: 'SHP-2024-002',
                        purchaseId: 'PUR-2024-018',
                        origin: 'Chennai Port',
                        destination: 'Bangalore Hub',
                        status: 'out-for-delivery',
                        value: 18000,
                        weight: '1.8 tons',
                        distance: '350 km',
                        partner: 'Delhivery',
                        estimatedDelivery: new Date(Date.now() + 2 * 60 * 60 * 1000),
                        actualPickup: new Date(Date.now() - 18 * 60 * 60 * 1000),
                        currentLocation: 'Bangalore Delivery Hub',
                        progress: 90,
                        timeline: [
                            { status: 'Pickup Scheduled', time: '2024-07-31 10:00', completed: true },
                            { status: 'Picked Up', time: '2024-07-31 15:00', completed: true },
                            { status: 'In Transit', time: '2024-07-31 20:00', completed: true },
                            { status: 'Out for Delivery', time: '2024-08-01 09:00', completed: true, current: true },
                            { status: 'Delivered', time: '2024-08-01 14:00', completed: false }
                        ]
                    },
                    {
                        id: 'SHP-2024-003',
                        purchaseId: 'PUR-2024-012',
                        origin: 'Kolkata Port',
                        destination: 'Mumbai Hub',
                        status: 'pickup-scheduled',
                        value: 35000,
                        weight: '4.2 tons',
                        distance: '2,000 km',
                        partner: 'FedEx',
                        estimatedDelivery: new Date(Date.now() + 48 * 60 * 60 * 1000),
                        actualPickup: null,
                        currentLocation: 'Kolkata Port',
                        progress: 10,
                        timeline: [
                            { status: 'Pickup Scheduled', time: '2024-08-01 16:00', completed: true, current: true },
                            { status: 'Picked Up', time: '2024-08-02 10:00', completed: false },
                            { status: 'In Transit', time: '2024-08-02 14:00', completed: false },
                            { status: 'Out for Delivery', time: '2024-08-03 09:00', completed: false },
                            { status: 'Delivered', time: '2024-08-03 15:00', completed: false }
                        ]
                    },
                    {
                        id: 'SHP-2024-004',
                        purchaseId: 'PUR-2024-021',
                        origin: 'Delhi ICD',
                        destination: 'Jaipur Hub',
                        status: 'delayed',
                        value: 12000,
                        weight: '1.2 tons',
                        distance: '280 km',
                        partner: 'Porter',
                        estimatedDelivery: new Date(Date.now() + 8 * 60 * 60 * 1000),
                        actualPickup: new Date(Date.now() - 30 * 60 * 60 * 1000),
                        currentLocation: 'Gurgaon Hub',
                        progress: 40,
                        delayReason: 'Vehicle breakdown',
                        timeline: [
                            { status: 'Pickup Scheduled', time: '2024-07-31 08:00', completed: true },
                            { status: 'Picked Up', time: '2024-07-31 12:00', completed: true },
                            { status: 'In Transit', time: '2024-07-31 16:00', completed: true, current: true },
                            { status: 'Out for Delivery', time: '2024-08-01 10:00', completed: false },
                            { status: 'Delivered', time: '2024-08-01 16:00', completed: false }
                        ]
                    }
                ];
            }

            renderShipments() {
                const shipmentsGrid = document.getElementById('shipmentsGrid');
                const filteredShipments = this.getFilteredShipments();

                if (filteredShipments.length === 0) {
                    shipmentsGrid.innerHTML = `
                        <div style="text-align: center; padding: 40px; color: #666;">
                            <div style="font-size: 3rem; margin-bottom: 15px;">📦</div>
                            <h3>No shipments found</h3>
                            <p>Try adjusting your search criteria</p>
                        </div>
                    `;
                    return;
                }

                shipmentsGrid.innerHTML = filteredShipments.map(shipment => {
                    const timeRemaining = this.getTimeRemaining(shipment.estimatedDelivery);
                    
                    return `
                        <div class="shipment-card">
                            <div class="shipment-header">
                                <div class="shipment-id">${shipment.id}</div>
                                <div class="shipment-status status-${shipment.status}">
                                    ${shipment.status.replace('-', ' ')}
                                </div>
                            </div>
                            
                            <div class="shipment-route">
                                <div class="route-point origin">
                                    <div class="location-name">${shipment.origin}</div>
                                    <div class="location-time">
                                        ${shipment.actualPickup ? 
                                            'Picked up: ' + this.formatTime(shipment.actualPickup) : 
                                            'Scheduled pickup'
                                        }
                                    </div>
                                </div>
                                <div class="route-arrow">→</div>
                                <div class="route-point destination">
                                    <div class="location-name">${shipment.destination}</div>
                                    <div class="location-time">ETA: ${timeRemaining}</div>
                                </div>
                            </div>
                            
                            <div class="shipment-details">
                                <div class="detail-item">
                                    <div class="detail-value">${this.formatCurrency(shipment.value)}</div>
                                    <div class="detail-label">Value</div>
                                </div>
                                <div class="detail-item">
                                    <div class="detail-value">${shipment.weight}</div>
                                    <div class="detail-label">Weight</div>
                                </div>
                                <div class="detail-item">
                                    <div class="detail-value">${shipment.distance}</div>
                                    <div class="detail-label">Distance</div>
                                </div>
                                <div class="detail-item">
                                    <div class="detail-value">${shipment.partner}</div>
                                    <div class="detail-label">Partner</div>
                                </div>
                            </div>
                            
                            ${shipment.status === 'delayed' ? `
                                <div style="background: #fed7d7; padding: 10px; border-radius: 8px; margin: 15px 0; color: #c53030; font-size: 0.9rem;">
                                    <strong>⚠️ Delayed:</strong> ${shipment.delayReason}
                                </div>
                            ` : ''}
                            
                            <div class="progress-timeline">
                                ${shipment.timeline.map(item => `
                                    <div class="timeline-item">
                                        <div class="timeline-dot ${item.completed ? 'completed' : item.current ? 'current' : 'pending'}">
                                            ${item.completed ? '✓' : item.current ? '●' : '○'}
                                        </div>
                                        <div class="timeline-content">
                                            <div class="timeline-title">${item.status}</div>
                                            <div class="timeline-time">${item.time}</div>
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                            
                            <div class="shipment-actions">
                                <button class="action-btn primary" onclick="trackShipment('${shipment.id}')">
                                    Track Live
                                </button>
                                <button class="action-btn secondary" onclick="contactPartner('${shipment.id}')">
                                    Contact Partner
                                </button>
                                ${shipment.status === 'delayed' ? 
                                    '<button class="action-btn success" onclick="expediteShipment(\'' + shipment.id + '\')">Expedite</button>' : 
                                    '<button class="action-btn secondary" onclick="viewDetails(\'' + shipment.id + '\')">Details</button>'
                                }
                            </div>
                        </div>
                    `;
                }).join('');
            }

            getFilteredShipments() {
                const statusFilter = document.getElementById('statusFilter').value;
                const routeFilter = document.getElementById('routeFilter').value;
                const searchTerm = document.getElementById('searchInput').value.toLowerCase();

                return this.shipments.filter(shipment => {
                    const matchesStatus = !statusFilter || shipment.status === statusFilter;
                    const matchesRoute = !routeFilter || this.getRouteKey(shipment) === routeFilter;
                    const matchesSearch = !searchTerm || 
                        shipment.id.toLowerCase().includes(searchTerm) ||
                        shipment.origin.toLowerCase().includes(searchTerm) ||
                        shipment.destination.toLowerCase().includes(searchTerm) ||
                        shipment.partner.toLowerCase().includes(searchTerm);
                    
                    return matchesStatus && matchesRoute && matchesSearch;
                });
            }

            getRouteKey(shipment) {
                const route = `${shipment.origin.toLowerCase()}-${shipment.destination.toLowerCase()}`;
                if (route.includes('mumbai') && route.includes('delhi')) return 'mumbai-delhi';
                if (route.includes('chennai') && route.includes('bangalore')) return 'chennai-bangalore';
                if (route.includes('kolkata') && route.includes('mumbai')) return 'kolkata-mumbai';
                return '';
            }

            filterShipments() {
                this.renderShipments();
            }

            getTimeRemaining(deliveryTime) {
                const now = new Date();
                const timeDiff = deliveryTime - now;
                
                if (timeDiff <= 0) {
                    return 'Overdue';
                }
                
                const hours = Math.floor(timeDiff / (1000 * 60 * 60));
                const minutes = Math.floor((timeDiff % (1000 * 60 * 60)) / (1000 * 60));
                
                if (hours > 24) {
                    const days = Math.floor(hours / 24);
                    return `${days} day${days > 1 ? 's' : ''}`;
                } else if (hours > 0) {
                    return `${hours}h ${minutes}m`;
                } else {
                    return `${minutes}m`;
                }
            }

            formatTime(date) {
                return new Date(date).toLocaleString('en-US', {
                    month: 'short',
                    day: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit'
                });
            }

            startRealTimeUpdates() {
                // Simulate real-time updates every 30 seconds
                setInterval(() => {
                    this.updateShipmentProgress();
                }, 30000);
            }

            updateShipmentProgress() {
                // Simulate progress updates for in-transit shipments
                this.shipments.forEach(shipment => {
                    if (shipment.status === 'in-transit' && shipment.progress < 85) {
                        shipment.progress += Math.random() * 5;
                        if (shipment.progress >= 85) {
                            shipment.status = 'out-for-delivery';
                        }
                    }
                });
                
                this.renderShipments();
            }
        }

        // Global functions
        function goBack() {
            window.history.back();
        }

        function schedulePickup() {
            alert('📅 Schedule Pickup\n\nPickup scheduling wizard:\n\n• Select pickup location\n• Choose time slot\n• Specify package details\n• Assign logistics partner\n• Generate pickup request\n\nEstimated pickup time: 2-4 hours\nCost: ₹500-2000 based on distance');
        }

        function trackShipment(shipmentId) {
            const shipment = window.logisticsSystem.shipments.find(s => s.id === shipmentId);
            if (shipment) {
                alert(`🚛 Live Tracking - ${shipment.id}\n\n` +
                      `Current Location: ${shipment.currentLocation}\n` +
                      `Status: ${shipment.status.replace('-', ' ')}\n` +
                      `Progress: ${Math.round(shipment.progress)}%\n` +
                      `ETA: ${window.logisticsSystem.getTimeRemaining(shipment.estimatedDelivery)}\n` +
                      `Partner: ${shipment.partner}\n\n` +
                      `Real-time GPS tracking available\n` +
                      `Updates via SMS/WhatsApp every 2 hours`);
            }
        }

        function contactPartner(shipmentId) {
            const shipment = window.logisticsSystem.shipments.find(s => s.id === shipmentId);
            if (shipment) {
                alert(`📞 Contact ${shipment.partner}\n\n` +
                      `Shipment: ${shipment.id}\n` +
                      `Driver: Rajesh Kumar (+91 98765-43210)\n` +
                      `Supervisor: Amit Sharma (+91 98765-43211)\n` +
                      `Customer Care: 1800-123-4567\n\n` +
                      `Available 24/7 for support\n` +
                      `WhatsApp support available`);
            }
        }

        function expediteShipment(shipmentId) {
            alert(`⚡ Expedite Shipment\n\n` +
                  `Shipment: ${shipmentId}\n` +
                  `Current Status: Delayed\n\n` +
                  `Expedite Options:\n` +
                  `• Priority routing (+₹2,000)\n` +
                  `• Express delivery (+₹5,000)\n` +
                  `• Dedicated vehicle (+₹8,000)\n\n` +
                  `Estimated time saved: 6-12 hours\n` +
                  `Proceed with expedited shipping?`);
        }

        function viewDetails(shipmentId) {
            const shipment = window.logisticsSystem.shipments.find(s => s.id === shipmentId);
            if (shipment) {
                alert(`📋 Shipment Details - ${shipment.id}\n\n` +
                      `Purchase: ${shipment.purchaseId}\n` +
                      `Route: ${shipment.origin} → ${shipment.destination}\n` +
                      `Value: ${window.logisticsSystem.formatCurrency(shipment.value)}\n` +
                      `Weight: ${shipment.weight}\n` +
                      `Distance: ${shipment.distance}\n` +
                      `Partner: ${shipment.partner}\n` +
                      `Progress: ${Math.round(shipment.progress)}%\n\n` +
                      `Insurance: Covered up to ${window.logisticsSystem.formatCurrency(shipment.value)}\n` +
                      `Special Instructions: Handle with care - damaged goods`);
            }
        }

        // Initialize the logistics system
        window.logisticsSystem = new LogisticsSystem();
    </script>
</body>
</html>